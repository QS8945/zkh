!function(e){function a(a,s,t,o,r,n){var m={},g=t.JEE_API_URL,c=t.JEE_HTTP_URL;return e.forEach(s,function(e,s){m[s]=function(s){if(s=s||{},s.__sid=o.getLocal("sessionId"),s.__ajax="json","object"!=typeof s)throw new Error("请求参数类型错误");var t={url:c+g+e.url,method:e.method,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};if("get"===e.method.toLowerCase()){var m=$.param(s);m=m?"?"+m:"",t.url+=m}else-1!==["post","put"].indexOf(e.method.toLowerCase())&&(t.data=$.param(s));var d=r.load(2,{shade:[.1,"#fff"]});return a(t).then(function(e){if("login"===e.data.result){r.msg(e.data.message,{shift:6}),localStorage.removeItem("sessionId"),localStorage.removeItem("userInfo"),sessionStorage.clear();"login"==n.current.name||n.go("login",{},{reload:!0})}return e.data.message&&r.msg(e.data.message),e},function(e){switch(e.status){case-1:e.message="请求终止";break;case 401:e.message=e.data.message||"需要身份验证";break;case 403:e.message=e.data.message||"请求被服务器拒绝";break;case 404:e.message=e.data.message||"请求接口不存在";break;case 500:e.message=e.data.message||"服务器错误";break;case 502:case 504:e.message=e.data.message||"服务器未响应";break;default:e.message=e.data.message||"系统异常"}return e.message&&r.msg(e.message,{shift:6}),e}).finally(function(){r.close(d)})}}),m}e.module("app.service").factory("JEEAPI",a),a.$inject=["$http","API_CONFIG","CONSTANT","session","layer","$state"]}(window.angular);