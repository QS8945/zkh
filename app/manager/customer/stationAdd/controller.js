!function(){function e(e,i,t,o,n,s,r,a,l,c){var m=this,d={};switch(m.initTools={item:{},uploadIcon:function(i){var o=i.files[0];if("image/png"!==o.type&&"image/jpeg"!==o.type)return t.msg("请上传jpg或png格式图片");var n=new FileReader;n.onload=function(){var i=o.size,s=c.Logo_Max_Size;if(s*=1024,!(i<=s))return t.msg("请上传2M以内图片");e.$apply(function(){m.initTools.item.previewImg=n.result})},o&&n.readAsDataURL(o)},uploadClick:function(){$("#iconFile").click()},saveForm:function(){var i=e.stationAdd;if(i.$invalid){var o=i.$error;for(item in o)return $(o[item][0].$$element[0]).focus(),t.msg("请填写正确的信息")}var n={clientCompanyCode:d.id,previewImg:m.initTools.item.previewImg,detailJson:JSON.stringify({name:m.initTools.stationName,responsiblePerson:m.initTools.item.extend.extendS1.responsiblePerson,responsibleTel:m.initTools.item.extend.extendS1.responsibleTel})};l.getIotStationSave(n).then(function(e){"true"===e.data.result&&r.reload()})},removeImg:function(){t.confirm("您确定要清除图片吗",{icon:3},function(e){m.initTools.item.previewImg="",$("#iconFile").val(""),$("#previewImg").attr("src",""),t.close(e)})}},m.initTools.type=i.type,m.initTools.type){case"ins":m.initTools.title="新增空压站";break;case"sel":m.initTools.title="空压站详情";break;case"upd":m.initTools.title="更新空压站"}i.id&&(d.id=i.id)}angular.module("app.managerModule.customer.add").controller("StationAddController",e),e.$inject=["$scope","$stateParams","layer","API","session","MD5","$state","TEMPLATEDATA","JEEAPI","COMMONJS"]}();