!function(){function e(e,t,o,a,i,n,r,l,s,c){var d=this,m={device_category_top5:"",collector_category_pie:"",brand_top3:"",exit_destribute_pie:"",install_line:""};d.initTools={compressors:[{name:"普通类型",id:0},{name:"空压机类型1",id:1},{name:"空压机类型2",id:2},{name:"空压机类型3",id:3},{name:"空压机类型4",id:4}],compressorBrands:[{name:"空压机品牌1",id:1},{name:"空压机品牌2",id:2},{name:"空压机品牌3",id:3},{name:"空压机品牌4",id:4}],collectorTypes:[{name:"采集器型号1",id:1},{name:"采集器型号2",id:2},{name:"采集器型号3",id:3},{name:"采集器型号4",id:4}]},d.initData={errorInfo:{error_first:{type:"0",num:0},error_second:{type:"1",num:0}},deviceState:{}},d.initFunctions={initFunc:function(){m.device_category_top5=Highcharts.chart("device_category_top5",{chart:{height:260,spacing:[0,0,0,0],margin:[20,40,0,-70],backgroundColor:"rgb(24,32,51)"},credits:{enabled:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},exporting:{enabled:!1},legend:{enabled:!0,align:"right",layout:"vertical",verticalAlign:"top",squareSymbol:!1,borderRadius:0,x:-10,y:20,itemMarginBottom:10,itemStyle:{color:"{point.color}"},itemHoverStyle:{color:"#ffffff"},symbolWidth:16,symbolHeight:7,labelFormatter:function(){return'<span style="color: '+this.color+';line-height:18px">'+this.name+"</span>"}},series:[{type:"pie",innerSize:"70%",name:"总数",data:[{name:"空压机类型1",y:24,color:"#FB743A",legendIndex:1},{name:"空压机类型2",y:0,color:"#2ACE8C"},{name:"空压机类型3",y:0,color:"#CEBF2E"},{name:"空压机类型4",y:0,color:"#429BFF"},{name:"空压机类型5",y:0,color:"#0FE400"}]}]}),m.collector_category_pie=Highcharts.chart("collector_category_pie",{chart:{height:260,spacing:[0,0,0,0],margin:[20,40,0,-70],backgroundColor:"rgb(24,32,51)"},credits:{enabled:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},exporting:{enabled:!1},legend:{enabled:!0,align:"right",layout:"vertical",verticalAlign:"top",squareSymbol:!1,borderRadius:0,x:-10,y:20,itemMarginBottom:10,itemStyle:{color:"{point.color}"},itemHoverStyle:{color:"#ffffff"},symbolWidth:16,symbolHeight:7,labelFormatter:function(){return'<span style="color: '+this.color+';line-height:18px">'+this.name+"</span>"}},series:[{type:"pie",name:"总数",data:[{name:"采集器型号1",y:1,color:"#FB743A",legendIndex:1},{name:"采集器型号2",y:0,color:"#2ACE8C"},{name:"采集器型号3",y:0,color:"#CEBF2E"},{name:"采集器型号4",y:0,color:"#429BFF"}]}]}),m.brand_top3=Highcharts.chart("brand_top3",{chart:{height:260,spacing:[0,0,0,0],margin:[20,40,0,-70],backgroundColor:"rgb(24,32,51)"},credits:{enabled:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},exporting:{enabled:!1},legend:{enabled:!0,align:"right",layout:"vertical",verticalAlign:"top",squareSymbol:!1,borderRadius:0,x:-10,y:20,itemMarginBottom:10,itemStyle:{color:"{point.color}"},itemHoverStyle:{color:"#ffffff"},symbolWidth:16,symbolHeight:7,labelFormatter:function(){return'<span style="color: '+this.color+';line-height:18px">'+this.name+"</span>"}},series:[{type:"pie",name:"总数",data:[{name:"空压机品牌1",y:24,color:"#FB743A",legendIndex:1},{name:"空压机品牌2",y:0,color:"#2ACE8C"},{name:"空压机品牌3",y:0,color:"#CEBF2E"}]}]}),m.exit_destribute_pie=Highcharts.chart("exit_destribute_pie",{chart:{height:260,spacing:[0,0,0,0],margin:[20,40,0,-70],backgroundColor:"rgb(24,32,51)"},credits:{enabled:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},exporting:{enabled:!1},legend:{enabled:!0,align:"right",layout:"vertical",verticalAlign:"top",squareSymbol:!1,borderRadius:0,x:-10,y:20,itemMarginBottom:10,itemStyle:{color:"{point.color}"},itemHoverStyle:{color:"#ffffff"},symbolWidth:16,symbolHeight:7,labelFormatter:function(){return'<span style="color: '+this.color+';line-height:18px">'+this.name+"</span>"}},series:[{type:"pie",name:"总数",data:[{name:"0~3",y:24,color:"#FB743A",legendIndex:1},{name:"3~5",y:16,color:"#2ACE8C"},{name:"5~8",y:24,color:"#CEBF2E"},{name:"8~10",y:25,color:"#429BFF"}]}]}),m.install_line=Highcharts.chart("install_line",{chart:{type:"column",height:220,marginTop:40,marginBottom:30,backgroundColor:"#192033"},colors:["#6176AF"],credits:{enabled:!1},title:{text:""},xAxis:{lineColor:"#1956A6",lineWidth:2,labels:{style:{color:"#A5A7AC",fontSize:10}},tickWidth:1,tickLength:8,tickPosition:"inside",tickColor:"#1956A6",type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"}},yAxis:{min:0,title:{text:"(分数)",rotation:0,y:-120,x:40,style:{color:"#ffffff"}},lineColor:"#1956A6",lineWidth:2,gridLineColor:"#1C2539",stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}},labels:{style:{color:"#A5A7AC",fontSize:10}},tickPixelInterval:10},legend:{align:"center",x:-30,verticalAlign:"top",y:-10,floating:!0,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1,borderWidth:0,squareSymbol:!1,symbolWidth:30,symbolHeight:12,symbolRadius:0,backgroundColor:"#192033",itemStyle:{color:"#A5A7AC",fontSize:10},itemWidth:160},exporting:{enabled:!1},tooltip:{formatter:function(){return"<b>"+this.key+"</b><br/>总数: "+this.y+"<br/>"}},plotOptions:{column:{dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white",style:{textOutline:"1px 1px black"}},borderWidth:0,pointPadding:0,showInLegend:!1}},series:[{data:[{name:"1月份",y:10},{name:"2月份",y:10},{name:"3月份",y:10},{name:"4月份",y:10},{name:"5月份",y:10},{name:"6月份",y:10},{name:"7月份",y:10},{name:"8月份",y:10},{name:"9月份",y:10},{name:"10月份",y:10},{name:"11月份",y:10},{name:"12月份",y:10}]}]})},getDeviceActual:function(){var e={dataTemplateId:"58d36b454d70a07303000012",dataItemId:"58d36b454d70a07303000025"},t=[{iotObjectId:"11111",dataItemId:$("#device_state").data("dataitemid")}],i={time:3600,iotObjectAndItems:JSON.stringify(t),dtProp:0,additionalOper:JSON.stringify(e)};a.getRealRecordByAddOper(i).then(function(e){if(e.data&&e.data.operCode==l.SUCCESS){var t=e.data.data;console.log(t),d.initData.deviceState=t}else o.msg(e.message,{icon:5,shift:6})})},initDataItems:function(){s.getDataItemListData().then(function(e){for(var t=e.data,o=$(".dataItem"),a=0;a<o.length;a++)for(var i=0;i<t.length;i++)if($(o[a]).data("dataitemname")===t[i].dataItemName){console.log(44),console.log($(o[a]).data("dataitemname")),$(o[a]).data("dataitemid",t[i].dataItemId),t[i].unit&&$(o[a]).data("unit",t[i].unit);break}console.log($("#breakdown").data("dataitemname")),d.initFunctions.getDeviceActual()})},getDeviceSta:function(){s.getDeviceTypeList().then(function(e){for(var t=e.data,o=[],a=0;a<t.length;a++)for(var i=0;i<d.initTools.compressors.length;i++)if(parseInt(t[a].type)==d.initTools.compressors[i].id){var n={name:d.initTools.compressors[i].name,y:t[a].num};o.push(n)}console.log(o);for(var a=0;a<t.length;a++)m.device_category_top5.series[0].data[a].update({name:o[a].name,y:o[a].y})}),s.getDeviceBrandList().then(function(e){for(var t=e.data,o=[],a=0;a<t.length;a++)for(var i=0;i<d.initTools.compressorBrands.length;i++)if(parseInt(t[a].brand)==d.initTools.compressorBrands[i].id){var n={name:d.initTools.compressorBrands[i].name,y:t[a].num};o.push(n)}for(var r=[],a=0;a<t.length;a++){var n={name:o[a].name,y:o[a].y};r.push(n)}m.brand_top3.series[0].update({data:r})}),s.getDeviceCollectorList().then(function(e){for(var t=e.data,o=[],a=0;a<t.length;a++)for(var i=0;i<d.initTools.collectorTypes.length;i++)if(parseInt(t[a].ctype)==d.initTools.collectorTypes[i].id){console.log(a,t[a].ctype,d.initTools.collectorTypes[i].id);var n={name:d.initTools.collectorTypes[i].name,y:t[a].num};o.push(n)}for(var r=[],a=0;a<t.length;a++){var n={name:o[a].name,y:o[a].y};r.push(n)}m.collector_category_pie.series[0].update({data:r})}),s.getDeviceDischargeList().then(function(e){var t=e.data;m.exit_destribute_pie.series[0].data[0].update({y:t.zerotothree}),m.exit_destribute_pie.series[0].data[1].update({y:t.threetofive}),m.exit_destribute_pie.series[0].data[2].update({y:t.fivetoeight}),m.exit_destribute_pie.series[0].data[3].update({y:t.eighttoten})}),s.getDeviceInstallList().then(function(e){for(var t=e.data,o=[],a=0;a<t.length;a++){var i={name:t[a].month,y:t[a].num,x:c.currentTime(t[a].month)};o.push(i)}m.install_line.series[0].update({data:o})})}},d.initFunctions.initFunc(),d.initFunctions.initDataItems(),d.initFunctions.getDeviceSta()}angular.module("app.managerModule.statistics.deviceSta").controller("DeviceStaController",e),e.$inject=["$scope","$stateParams","layer","API","session","MD5","$state","TEMPLATEDATA","JEEAPI","COMMONJS"]}();